final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "rep_pres_votes_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = final_data[final_data$year == 2024,])
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), rep_pres_votes_last = sum(rep_pres_votes_last))
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "rep_pres_votes_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = final_data[final_data$year == 2024,])
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), rep_pres_votes_last = sum(rep_pres_votes_last))
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = final_data[final_data$year == 2024,])
View(pred_data_2024)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "rep_pres_votes_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = final_data[final_data$year == 2024,])
View(pred_data_2024)
View(final_data)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = final_data[final_data$year == 2024,])
View(pred_data_2024)
library(dplyr)
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = final_data[final_data$year == 2024,])
pred_data_2024$pct_rep_pres_pred <- pred_data_2024$rep_pres_votes_pred / pred_data_2024$presvotes_total_pred
pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
View(pred_data_2024)
PQ1 = pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
View(PQ1)
View(final_data)
View(PQ1)
pred_data_2024_NE_ME = pred_data_2024[pred_data_2024$state_ab %in% c("NE", "ME"),]
pred_data_2024_NE_ME
View(pred_data_2024_NE_ME)
PQ1_NE_ME = merge(PQ1, pred_data_2024_NE_ME, by = "state_ab")
PQ1 = merge(PQ1, pred_data_2024_NE_ME, by = "state_ab")
PQ1
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = final_data[final_data$year == 2024,])
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = final_data[final_data$year == 2024,])
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
PQ1 = pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
PQ1 = merge(PQ1, pred_data_2024_NE_ME, by = "state_ab")
PQ1
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = final_data[final_data$year == 2024,])
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = final_data[final_data$year == 2024,])
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
PQ1 = pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
PQ1
pred_data_2024_NE_ME
PQ1 = rbind(PQ1, pred_data_2024_NE_ME)
colnames(PQ1)
pred_data_2024_NE_ME = pred_data_2024_NE_ME[, c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred", "pct_rep_pres_pred")]
pred_data_2024_NE_ME
PQ1 = rbind(PQ1, pred_data_2024_NE_ME)
PQ1
pred_data_2024_NE_ME
View(PQ1)
pred_data_2024_NE_ME = pred_data_2024[pred_data_2024$state_ab %in% c("NE", "ME"),]
View(pred_data_2024_NE_ME)
#recoding state_ab as cd
pred_data_2024_NE_ME$cd = pred_data_2024_NE_ME$state_ab
View(pred_data_2024_NE_ME)
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = final_data[final_data$year == 2024,])
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = final_data[final_data$year == 2024,])
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
PQ1 = pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
#predictions for each district where state_ab = NE or ME with only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024[pred_data_2024$state_ab %in% c("NE", "ME"),]
#recoding state_ab as cd
pred_data_2024_NE_ME$state_ab = pred_data_2024_NE_ME$cd
pred_data_2024_NE_ME = pred_data_2024_NE_ME[, c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred", "pct_rep_pres_pred")]
pred_data_2024_NE_ME = pred_data_2024_NE_ME[, c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred", "pct_rep_pres_pred")]
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = final_data[final_data$year == 2024,])
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = final_data[final_data$year == 2024,])
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
PQ1 = pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
#predictions for each district where state_ab = NE or ME with only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024[pred_data_2024$state_ab %in% c("NE", "ME"),]
#recoding state_ab as cd
pred_data_2024_NE_ME$state_ab = pred_data_2024_NE_ME$cd
pred_data_2024_NE_ME = pred_data_2024_NE_ME[, c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred", "pct_rep_pres_pred")]
pred_data_2024_NE_ME[, c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred", "pct_rep_pres_pred")]
View(pred_data_2024_NE_ME)
#selecting only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024_NE_ME[c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred", "pct_rep_pres_pred")]
pred_data_2024_NE_ME
pred_data_2024_NE_ME[c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred", "pct_rep_pres_pred")]
#selecting only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024_NE_ME[, c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred", "pct_rep_pres_pred")]
pred_data_2024_NE_ME[c("state_ab")]
#selecting only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024_NE_ME[c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred")]
PQ1 = rbind(PQ1, pred_data_2024_NE_ME)
PQ1
#adding pct_rep_pres_pred
pred_data_2024_NE_ME$pct_rep_pres_pred = pred_data_2024_NE_ME$rep_pres_votes_pred / pred_data_2024_NE_ME$presvotes_total_pred
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = final_data[final_data$year == 2024,])
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = final_data[final_data$year == 2024,])
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
PQ1 = pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
#predictions for each district where state_ab = NE or ME with only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024[pred_data_2024$state_ab %in% c("NE", "ME"),]
#recoding state_ab as cd
pred_data_2024_NE_ME$state_ab = pred_data_2024_NE_ME$cd
#selecting only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024_NE_ME[c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred")]
#adding pct_rep_pres_pred
pred_data_2024_NE_ME$pct_rep_pres_pred = pred_data_2024_NE_ME$rep_pres_votes_pred / pred_data_2024_NE_ME$presvotes_total_pred
PQ1 = rbind(PQ1, pred_data_2024_NE_ME)
PQ1
write_xlsx(PQ1, "data/predictions_PQ1,2.xlsx")
setwd("/Users/khuan-yuhall/Desktop/Yale/Fall 2024/Election Forecasting/Forecast")
write_xlsx(PQ1, "data/predictions_PQ1,2.xlsx")
state_data = read.csv("data/full_state_data.csv")
state_data
View(final_data)
colnames(final_data)
final_data$num_rep_H_votes = final_data$rep_pct_house_race * final_data$house_votes_total
P4_lm1 = lm(num_rep_H_votes ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop, data = final_data)
summary(P4_lm1)
colnames(final_data)
P4_lm1 = lm(num_rep_H_votes ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + r_cand_house + d_cand_house, data = final_data)
summary(P4_lm1)
colnames(final_data)
View(PQ1)
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = final_data[final_data$year == 2024,])
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = final_data[final_data$year == 2024,])
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
PQ1 = pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
PQ1
View(pred_data_2024)
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", 'rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age")]
pred_data_2024
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age")]
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = pred_data_2024,])
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = pred_data_2024,])
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = pred_data_2024)
View(pred_data_2024)
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = pred_data_2024)
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age", "total_population")]
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = pred_data_2024)
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = pred_data_2024)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age", "total_population")]
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age", "total_population")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = pred_data_2024)
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = pred_data_2024)
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age", "total_population", "rep_pct_pres_last")]
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age", "total_population", "rep_pct_pres_last")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = pred_data_2024)
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = pred_data_2024)
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age", "total_population", "rep_pct_pres_last", "est_voting_age_pop")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = pred_data_2024)
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = pred_data_2024)
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
PQ1 = pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
#predictions for each district where state_ab = NE or ME with only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024[pred_data_2024$state_ab %in% c("NE", "ME"),]
#recoding state_ab as cd
pred_data_2024_NE_ME$state_ab = pred_data_2024_NE_ME$cd
#selecting only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024_NE_ME[c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred")]
#adding pct_rep_pres_pred
pred_data_2024_NE_ME$pct_rep_pres_pred = pred_data_2024_NE_ME$rep_pres_votes_pred / pred_data_2024_NE_ME$presvotes_total_pred
#add to end of PQ1
PQ1 = rbind(PQ1, pred_data_2024_NE_ME)
PQ1
View(PQ1)
View(pred_data_2024)
View(final_data)
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age + presvotes_total_last, data = final_data)
summary(P1_lm1)
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age + presvotes_total_last, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age", "total_population", "rep_pct_pres_last", "est_voting_age_pop")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = pred_data_2024)
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = pred_data_2024)
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
PQ1 = pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
#predictions for each district where state_ab = NE or ME with only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024[pred_data_2024$state_ab %in% c("NE", "ME"),]
#recoding state_ab as cd
pred_data_2024_NE_ME$state_ab = pred_data_2024_NE_ME$cd
#selecting only columns "state_ab", "rep_pres_votes_pred", 'presvotes_total_pred", "pct_rep_pres_pred"
pred_data_2024_NE_ME = pred_data_2024_NE_ME[c("state_ab", "rep_pres_votes_pred", "presvotes_total_pred")]
#adding pct_rep_pres_pred
pred_data_2024_NE_ME$pct_rep_pres_pred = pred_data_2024_NE_ME$rep_pres_votes_pred / pred_data_2024_NE_ME$presvotes_total_pred
#add to end of PQ1
PQ1 = rbind(PQ1, pred_data_2024_NE_ME)
View(PQ1)
View(pred_data_2024)
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age + presvotes_total_last, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age", "total_population", "rep_pct_pres_last", "est_voting_age_pop")]
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age", "total_population", "rep_pct_pres_last", "est_voting_age_pop")]
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = pred_data_2024)
pred_data_2024$rep_pres_votes_pred
knitr::opts_chunk$set(echo = TRUE)
#loading data
final_data <- read.csv("data/full_district_data_v2.csv")
#explore data
colnames(final_data)
#adding a col called rep_pres_votes
final_data$rep_pres_votes_now <- final_data$rep_pct_pres_now * final_data$presvotes_total_now
final_data$rep_pres_votes_last <- final_data$rep_pct_pres_last * final_data$presvotes_total_last
#model to predict rep_pres_votes
P1_lm1 = lm(rep_pres_votes_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + pct_male + pct_white + pct_senior + median_age + presvotes_total_last, data = final_data)
summary(P1_lm1)
#final data but only for 2024 and with cd, year, state_ab
pred_data_2024 <- final_data[final_data$year == 2024, c("cd", "year", "state_ab", "rep_pres_votes_last", "presvotes_total_last", "relative_partisanship_CPVI", "rep_pres_votes_last", "total_housing_units", "pct_male", "pct_white", "pct_senior", "median_age", "total_population", "rep_pct_pres_last", "est_voting_age_pop")]
#use model to predict rep_pres_votes for 2024
pred_data_2024$rep_pres_votes_pred <- predict(P1_lm1, newdata = pred_data_2024)
#now need to predict turnout, presvotes_total_now
P2_lm1 = lm(presvotes_total_now ~ relative_partisanship_CPVI + rep_pres_votes_last + total_housing_units + factor(state_ab) + total_population + rep_pct_pres_last + pct_senior + median_age + est_voting_age_pop + pct_white + pct_male, data = final_data)
summary(P2_lm1)
#adding presvotes_total_now predictions to pred_data_2024
pred_data_2024$presvotes_total_pred <- predict(P2_lm1, newdata = pred_data_2024)
library(dplyr)
#sum up rep_pres_votes_pred and rep_pres_votes_last for each state
PQ1 = pred_data_2024|>
group_by(state_ab) |>
summarise(rep_pres_votes_pred = sum(rep_pres_votes_pred), presvotes_total_pred = sum(presvotes_total_pred), pct_rep_pres_pred = sum(rep_pres_votes_pred) / sum(presvotes_total_pred))
PQ1
View(final_data)
